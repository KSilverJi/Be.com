{% extends 'base.html' %}

{% load static %}

{% block title %}home.html{% endblock %}

{% block extra-style %}
<style type="text/css">
.today_mind {
    height: 350px;
    border-top: 10px solid #ccc;
    border-bottom: 10px solid #ccc;
    padding: 20px 0 0 20px;
}
.class_act {
    height: 350px;
    
    padding: 0px 0 0 20px;
}
.my_mind {
    height: 500px;
    border-top: 10px solid rgb(14, 30, 175);
    border-bottom: 10px solid rgb(14, 30, 175);
    padding: 20px 0 0 20px;
}
.mate_diary {
    height: 350px;
    border-top: 10px solid rgb(244, 200, 175);
    border-bottom: 10px solid rgb(244, 200, 175);
    padding: 20px 0 0 20px;
}
.class_hot {
    height: 350px;
    border-top: 10px solid #ccc;
    border-bottom: 10px solid #ccc;
    padding: 20px 0 0 20px;
}
.title {
    color: #c80;
    font-weight: bold;
}
.powered {
    position: relative;
    top: 77%;
    color: #cc0;
    font-style: italic;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="today_mind col-xs-5 col-md-8">
            <h3>오늘의 감정일기</h3>
            {{profile.school}}
            {% for friend in class_friends.all %}
                {{friend.username}}
            {% endfor %}
            <div class="record">
                <div class="moodtracker-title">감정 일기 작성</div>
                <div class="record-write">
                    <div class="record-date">{{year}}년 {{month}}월 {{day}}일</div>
                    <form action="{% url 'moodtracker:create' %}">
                        <div class="mood_input">
                            <label>
                                <input type="radio" name="mood" value="happy" checked="checked"><!--<label for="happy">&nbsp;</label>-->
                                <img src="{% static 'img/happy_emoji.png' %}" height=50>
                            </label>
                            <label>
                                <input type="radio" name="mood" value="sad">
                                <img src="{% static 'img/sad_emoji.png' %}" height=50>
                            </label>
                            <label>
                                <input type="radio" name="mood" value="calm">
                                <img src="{% static 'img/calm_emoji.png' %}" height=50>
                            </label>
                            <label>
                                <input type="radio" name="mood" value="angry">
                                <img src="{% static 'img/angry_emoji.png' %}" height=50>
                            </label>
                            <label>
                                <input type="radio" name="mood" value="soso">
                                <img src="{% static 'img/soso_emoji.png' %}" height=50>
                            </label>
                        </div>
                        <div class="content_input">
                            <textarea placeholder=" 감정 일기 작성" onkeyup="autoTextarea(this,100)" id="text" name="content" rows="10" style="word-wrap: break-word; resize: none; width: 300px; "></textarea>  
                            <br>
                        </div>
                        <div class="diary_submit_button_wrap">
                            <input type="submit" class="diary_submit_button" value="저장" name="submit"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="class_act col-xs-3 col-md-4">
            <!--<h3>우리반 활성도</h3>-->
            <!--<p>우리반의 활성도를 한 눈에 파악하기</p>-->
            <p>
                <img src="/static/img/active_class.png" width="400px" height="350px" alt="우리 반의 활성도">
                
            </p>
        </div>
    </div>
    <div class="row">
        <div class="my_mind col-xs-5 col-md-12">
            <h3>나의 감정분석</h3>
            <div class="mood-freqent col-md-6">
                <div class="moodtracker-title">어떤 감정을 자주 느꼈을까요?</div>
                <div class="mood-frequent-img">
                    <div class="mood-img"><img src="{% static 'img/happy_emoji.png' %}" height=50></div>
                    <div class="mood-img"><img src="{% static 'img/sad_emoji.png' %}" height=50></div>
                    <div class="mood-img"><img src="{% static 'img/calm_emoji.png' %}" height=50></div>
                    <div class="mood-img"><img src="{% static 'img/angry_emoji.png' %}" height=50></div>
                    <div class="mood-img"><img src="{% static 'img/soso_emoji.png' %}" height=50></div>
                </div>
                <div>
                    <canvas id="mood_barChart" height="300"></canvas>
                    <script>
                        var ctx = document.getElementById('mood_barChart');
                        var mood_barChart = new Chart(ctx, {
                            type: 'horizontalBar',
                            data: {
                                labels: ['', '', '', '', ''],
                                datasets: [{
                                    label: '',
                                    data: ["{{happy}}", "{{sad}}", "{{calm}}", "{{angry}}", "{{soso}}"],
                                    backgroundColor: [
                                        'rgba(57, 215, 208, 1)',
                                        'rgba(13, 107, 249, 1)',
                                        'rgba(249, 155, 13, 1)',
                                        'rgba(255, 123, 85, 1)',
                                        'rgba(211, 145, 255, 1)'
                                    ]
                                }]
                            },
                            options: {
                                legend:{
                                    display: false 
                                },
                                responsive: false, 
                                scales: {
                                    xAxes: [{
                                        ticks: {
                                            beginAtZero: true,
                                            stepSize: 1
                                        },
                                        gridLines: {
                                            color: "rgba(0, 0, 0, 0)",
                                        }
                                    }],
                                    yAxes: [{
                                        gridLines: {
                                            color: "rgba(0, 0, 0, 0)",
                                        }   
                                    }]
                                }
                            }
                        });
                    </script>
                </div>
            </div>
            <div class="word-cloud col-md-5">
                <div class="moodtracker-title">{{user}}님이 자주 쓰는 단어</div>
                <img src="{{wc.wc_image.url}}" height="300">
                
            </div>
        </div>
    </div>
    <div class="row">
        <div class="mate_diary col-md-7">
            <h3>짝꿍 친밀도</h3>
            <div class="mate-profile-img">
                <div class="mate-profile">
                  <a href="{% url 'myprofile:detail' mate.mate1.id %}">
                    <img src="{{mate.mate1.profile_image.url}}" width="100" height="100">
                    <div style="width:100px;">{{mate.mate1.username}}</div>
                  </a>
                </div>
                <img src="{% static 'img/mate-zigzag.png' %}" height="50" style="float:left; margin-top:20px;">
                <div class="mate-profile">
                  <a href="{% url 'myprofile:detail' mate.mate2.id %}">
                    <img src="{{mate.mate2.profile_image.url}}" width="100" height="100">
                    <div style="width:100px;">{{mate.mate2.username}}</div>
                  </a>
                </div>
            </div>
            <div class="intimacy">
                <div class="intimacy-text">
                  {% if mate.intimacy >= 0 and mate.intimacy <= 20 %}
                  아직은 어색하지만 서로에게 먼저 다가가보세요.<br>의외의 공통점을 발견할 수 있을지도 몰라요!
                  {% elif mate.intimacy <= 40 %}
                  한 발짝 한 발짝 서로에게 다가가고 있는 중인가요?<br>퀘스트를 완료하다보면 더욱 가까워질 수 있을 거예요!
                  {% elif mate.intimacy <= 60 %}
                  벌써 함께 보낸 시간이 이만큼이나 되네요!<br>앞으로 좋은 추억을 더 쌓아가길 바라요.
                  {% elif mate.intimacy <= 80 %}
                  두 분 정말 잘 맞는 친구네요!<br>절친이 되기까지 얼마 안 남았어요!
                  {% elif mate.intimacy <= 100 %}
                  한 학기 동안 정말 많은 시간을 함께했네요.<br>이제 두 분이 서로를 잘 아는 친구가 되었길 바라요!
                  {% endif %}
                </div>
                <div class="progress">
                  <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:{{mate.intimacy}}%">
                    {{mate.intimacy}}%
                  </div>
                </div>
              </div>
        </div>
        <div class="class_hot col-md-5">
            <h3>우리반 인기글</h3>
            <p>인기순으로 나열해보기?</p>
        </div>
    </div>
    <div class="row"></div>
</div>
{% endblock content %}

{% block footer %}
<footer class="fixed-bottom bg-info">
    <div class="text-white font-italic text-right mr-5">Copyright &copy; 2020 Be.com by soljik</div>
</footer>
{% endblock %}

