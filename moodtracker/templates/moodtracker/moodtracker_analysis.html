{% extends "base.html" %}

{% load static %}

{% block title %}moodtracker_analysis{% endblock %}

{% block extra-style %}
<style type="text/css">
.recent_mood {
    height: 350px;
    border-top: 10px solid #ccc;
    border-bottom: 10px solid #ccc;
    padding: 20px 0 0 20px;
}
.pos_neg_percent {
    height: 350px;
    border-top: 10px solid #ccc;
    border-bottom: 10px solid #ccc;
    padding: 20px 0 0 20px;
}
.my_mind {
    height: 500px;
    border-top: 10px solid rgb(14, 30, 175);
    border-bottom: 10px solid rgb(14, 30, 175);
    padding: 20px 0 0 20px;
}
.mood_freqent {
    height: 500px;
    border-top: 10px solid rgb(244, 200, 175);
    border-bottom: 10px solid rgb(244, 200, 175);
    padding: 20px 0 0 20px;
}
.word_cloud {
    height: auto;
    border-top: 10px solid #ccc;
    border-bottom: 10px solid #ccc;
    padding: 20px 0 0 20px;
}
.title {
    color: #c80;
    font-weight: bold;
}
.powered {
    position: relative;
    top: 77%;
    color: #cc0;
    font-style: italic;
}

</style>
{% endblock %}

{% block script %}
    
{% endblock %}


{% block content %}
<div class="container">
    <div class="row">
        <div class="recent_mood col-xs-5 col-md-8">
            <h3>요즘 기분</h3>
            <p>요즘 스트레스를 받는 일이 있나요?  우울감을 느낀다면 상담을 받아보는 건 어떨까요?</p>
        </div>
        <div class="pos_neg_percent col-xs-3 col-md-4">
            <h3>일기 속 감정 분석</h3>
            <p>
                긍정: 3
                부정: 2
                <br>
                비율: {{pos_per}}% : {{neg_per}}
            </p>
            <div>
                <canvas id="pos_neg_barChart" width="300"></canvas>
                <script>
                    var ctx = document.getElementById('pos_neg_barChart');
                    var pos_neg_barChart = new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: ['', ''],
                            datasets: [{
                                label: '',
                                data: ["{{neg_per}}", "{{pos_per}}"],
                                backgroundColor: [
                                    'rgba(255, 123, 85, 1)',
                                    'rgba(57, 215, 208, 1)'
                                ],
                            }]
                        },
                        options: {
                            legend:{
                                display: false
                            },
                            responsive: false
                        }
                    });
                </script>
            </div>
        </div>
    </div>
    <!--
    <div class="row">
        <div class="my_mind col-xs-5 col-md-12">
            <h3>나의 감정분석</h3>
            <p>나의 감정 분석은 어떻게 나올지</p>
        </div>
    </div>
    -->
    <div class="row">
        <div class="mood_freqent col-md-7">
            <div>
                HAPPY : {{happy}}, SAD : {{sad}}, CALM : {{calm}}, ANGRY : {{angry}}, SOSO : {{soso}}
            </div>
            <div>
                <canvas id="mood_barChart" height="300"></canvas>
                <script>
                    var ctx = document.getElementById('mood_barChart');
                    var mood_barChart = new Chart(ctx, {
                        type: 'horizontalBar',
                        data: {
                            labels: ['', '', '', '', ''],
                            datasets: [{
                                label: '',
                                data: ["{{happy}}", "{{sad}}", 2, "{{angry}}", "{{soso}}"],
                                backgroundColor: [
                                    'rgba(57, 215, 208, 1)',
                                    'rgba(13, 207, 249, 1)',
                                    'rgba(249, 155, 13, 1)',
                                    'rgba(255, 123, 85, 1)',
                                    'rgba(211, 145, 255, 1)'
                                ]
                            }]
                        },
                        options: {
                            legend:{
                                display: false 
                            },
                            indexAxis: 'y',
                            responsive: false, 
                            scales: {
                                xAxes: [{
                                    ticks: {
                                        beginAtZero: true,
                                        stepSize: 1
                                    }
                                }]
                            }
                        }
                    });
                </script>
            </div>
        </div>
        <div class="word_cloud col-md-5">
            <h3>강미나님이 자주 쓰는 단어</h3>
            <p>워드 클라우드</p>
            <img src="{{wc.wc_image.url}}" height="300">
            
        </div>
    </div>
    <div class="row"></div>
</div>
{% endblock content %}

{% block footer %}
<footer class="fixed-bottom bg-info">
    <div class="text-white font-italic text-right mr-5">Copyright &copy; 2020 Be.com by soljik</div>
</footer>
{% endblock %}